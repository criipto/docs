---
product: verify
category: eIDs
sort: 5
title: Danish MitID Erhverv
subtitle: Learn more about Danish MitID Erhverv token contents, how to request business logins and how to create test users.
---
import Layout from '../../../layouts/mdx';

export default Layout;

import {ImageContainer} from '../../../components/MdxProvider';
import DanishMitIDCompanySignatoryJwtSnippet from '../../../snippets/jwt-payloads/danish-mitid-erhverv-company-signatory'
import DanishMitIDErhvervJwtSnippet from '../../../snippets/jwt-payloads/danish-mitid-erhverv'

## JWT/Token examples

### MitID for company signatories #jwttoken-examples-mitid-companysignatory

<DanishMitIDCompanySignatoryJwtSnippet />

### MitID Erhverv (MitID for business) #jwttoken-examples-mitid-business

<DanishMitIDErhvervJwtSnippet />

The `sub`, `nameidentifier` and `uuid` values here will not be the same as for a corresponding [citizen-MitID login](/verify/e-ids/danish-mitid/#jwttoken-examples-mitid-citizen), even if the user chose to use their personal MitID for login.

## Collecting CPR numbers (optional)

Business users (both _employees_ and _company signatories_) may not always have CPR numbers associated with their profiles.

CPR numbers are also not required for accessing information about the business entities where the user holds a position as a signatory or an employee. Criipto relies on the user's UUID to retrieve this information from the MitID Erhverv API. Therefore, if you don't need CPR numbers in business logins, no additional configuration is required.


<Highlight icon="info">

Plese note: if the end-customer has not yet migrated to MitID Erhverv, only company-signatory lookups **via CPR** will allow business users to log in. This may change when NemID fully closes, but you may have to rely on CPR numbers for lookups during this transitional period to accomodate all users.

</Highlight>

If you do require CPR numbers, you can collect them by enabling the two toggles in the [management dashboard](https://dashboard.criipto.com/providers/DK_MITID):
- Add CPR for MitID logins
- CPR Optional

![CPR toggles](./images/mitid-erhverv-CPR-toggle-dashboard.png)

When the "CPR Optional" toggle is enabled, a user will be prompted to provide their CPR number ONLY if the CPR number is registered in their profile. This feature can be useful in a scenario where you offer both MitID citizen logins and business logins, and [require CPR numbers for the citizen logins](/verify/e-ids/danish-mitid/#collecting-cpr-numbers). 

## Request business logins

You can request a login in business context via the following acr_values: `urn:grn:authn:dk:mitid:business`.  
Alternatively, you can send a `login_hint=business` or `login_hint=business_optional` query parameter in the authorize request.  
This will allow *company signatories* and *employees* to log in to your site or application with their personal MitID or their dedicated employee MitID (depending on how they have been setup in MitID Ervherv).

`login_hint=business` will allow logging in as a business user.  
`login_hint=business_optional` will give an option to choose to log in as a private individual, or a business user. 

You can read more about the [`login_hint` here](/verify/getting-started/oidc-intro/#the-loginhint-parameter).

You can determine which kind of option the user selected by inspecting the claim values in the JWT payload.
- Employee logins will have an `employee` claim with value `true`.
- Company signatory logins will have a `companySignatory` claim with value `true`.
- Private logins will have neither of the above.

## Test users 

To test business logins with MitID Erhverv, you will start by [creating a test organization](/verify/e-ids/danish-mitid-erhverv/#create-test-organization) and [a test user](/verify/e-ids/danish-mitid-erhverv/#create-test-users), and then [connect the test user](/verify/e-ids/danish-mitid-erhverv/#connect-user-to-organization-as-an-employee) to the organization as an employee. 

Detailed instructions, along with a [video demonstration](#video), are provided below to guide you through the process.

### Create test organization

1. Go to the test organization creation page and fill in the form: [https://testportal.test-devtest4-nemlog-in.dk/](https://testportal.test-devtest4-nemlog-in.dk/)

2. The wizard will generate an organization admin account with username/password credentials. The password is self-supplied, and the username is autogenerated.  

3. The organization admin can then log in with username and password in the "Test login" tab in the NemLog-in IdP (aka "EIA"): [https://erhvervsadministration.test-devtest4-nemlog-in.dk/](https://erhvervsadministration.test-devtest4-nemlog-in.dk/)

![Nemlog-in test login](./images/mitid-erhverv-nemlog-in.png)

4. After you login with the organization admin user, you must explicitly enable the use of personal MitID (per organization) under Settings (Indstillinger => Identifikationsmidler). 

![Private MitID](./images/mitid-erhverv-privat.png)

### Create test users

Manually create a test user in both:
- MitID Test Tool: [https://pp.mitid.dk/test-tool/frontend/#/create-identity](https://pp.mitid.dk/test-tool/frontend/#/create-identity)
- MitID Simulator: [https://mitidsimulator.test-devtest4-nemlog-in.dk/Home/Create](https://mitidsimulator.test-devtest4-nemlog-in.dk/Home/Create)    

*Test users CAN HAVE the same user ID.*  
*Test users MUST HAVE a CPR number, and it MUST BE the same in the 2 test-user creation tools listed above.*
When creating a test user [with MitID Simulator](https://mitidsimulator.test-devtest4-nemlog-in.dk/Home/Create), make sure to add a CPR number and check the Private MitID checkbox: 

![MitID Simulator form](./images/mitid-erhverv-cpr.png)

<Highlight icon="info">

In general, and most likely for MitID Erhverv production, CPR numbers are expected to be optional.

</Highlight>

### Connect user to organization as an employee

**Please note:** [creating test users](/verify/e-ids/danish-mitid-erhverv/#create-test-users) is a required step. The auto-generated admin user you created for a test organization CANNOT be used for employee login.

1. Once the test users are created, the organization admin can create an employee [in EIA](https://erhvervsadministration.test-devtest4-nemlog-in.dk/).  

<Highlight icon="info">

When logged in as an admin user, you have the option to choose additional information to include when creating test users. For instance:

- SE number (administrative unit a user belongs to)
- P number (location a user is associated with)
- RID (Resource Identification Number, can be used for linking to NemID)

This can be done under Settings (Indstillinger => Oprettelse af brugere): 

![Test Users Additional Info](./images/mitid-erhverv-test-user-additional-info.png)

If P and SE numbers are enabled for an organization after test users have been created, each user must be manually updated to get these values.  
This is done by editing the user configuration section, under "Organisation":

![Add P- and SE- numbers to users](./images/danish-mitid-erhverv-userconfig.png)

</Highlight>

2. An activation link will be sent to the specified employee email. You can use your personal email for both the organization admin and the employee email.  
If you followed the steps correctly, your EIA dashboard will look something like this:
![EIA Success State](./images/mitid-erhverv-eia-success-state.png)

3. If the organization admin has enabled use of personal MitID, the test employee can use their own test MitID for activation/onboarding, but a unique employee MitID username MUST BE specified during enrolment.

### Video

<video controls>
  <source src="https://www.criipto.com/hubfs/MitID%20Erhverv%20Test%20Users%20Video/test_user_mitid_erhverv.mp4" type="video/mp4" />
</video>
